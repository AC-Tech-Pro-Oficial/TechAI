---
description: Educational research mode - answers questions with comprehensive reports
matches: "^/ask"
---

# TechAsk Educational Research Workflow v5.0

> [!CAUTION]
> **üîí ABSOLUTE READ-ONLY MODE**
> When `/ask` is detected, you are in **STRICT READ-ONLY MODE**.
> You MUST NOT modify, create, delete, or change ANY file in ANY project.
> This is ABSOLUTE and UNCONDITIONAL. No exceptions. No follow-up action allowed.
> **This overrides TURBO MODE and all other autonomy rules.**

---

## üö® CRITICAL: DATE AWARENESS (ALWAYS FIRST)

> [!IMPORTANT]
> **ALWAYS extract the current date from `<ADDITIONAL_METADATA>` BEFORE responding.**
> Format: `YYYY-MM-DDTHH:MM:SS¬±HH:MM` (ISO 8601)
> Example: `2025-12-31T11:43:01-03:00` = **December 31, 2025**

### Protocol:
1. **READ** the `<ADDITIONAL_METADATA>` block
2. **EXTRACT** the date components
3. **USE** this date for all research and output
4. **NEVER** use your training data to guess dates

---

## üìä RESPONSE TIER CLASSIFICATION (MANDATORY)

Before responding, classify the user's request into one of three tiers:

### Tier 1: Quick Answer
**Trigger signals:** "what is", "quick question", "briefly explain", "simple question", "just wondering"

| Output | Format |
|--------|--------|
| In-chat text response | Plain text with markdown formatting |
| No artifacts required | Keep response concise |

---

### Tier 2: Deep Research (INVOKES /research METHODOLOGY)

**Trigger signals (ANY of these ‚Üí Tier 2):**
- "comprehensive"
- "expansive"  
- "research"
- "teach me about"
- "deep dive"
- "full guide"
- "analysis"
- "report"
- "explain everything"
- "I want to learn"
- "educate me"
- "thorough"

| Output | Format |
|--------|--------|
| **Primary** | **PDF file** (generated using `mcp-pdf` or `html2pdf` MCP tools) |
| **Secondary** | Well-designed **HTML file** (interactive, styled, professional) |
| **Location** | Brain folder: `%USERPROFILE%\.gemini\antigravity\brain\<id>\` |

> [!CAUTION]
> **PDF GENERATION IS MANDATORY FOR TIER 2**
> After creating the HTML report, use the MCP PDF tools to generate a PDF:
> - **Primary tool:** `mcp-pdf` (Playwright-based)
> - **Fallback tool:** `html2pdf` (Puppeteer-based)
> The PDF is the PRIMARY deliverable. HTML is secondary.

> [!IMPORTANT]
> **TIER 2 = INVOKE FULL `/research` WORKFLOW**
> When Tier 2 is triggered, execute the **7-Phase Deep Research Methodology** from `/research`:
> 1. Definition & Disambiguation
> 2. Architectural Analysis
> 3. Gap Identification
> 4. Discovery & Classification (20+ sources)
> 5. Technical Deep Dive (15+ additional sources)
> 6. Synthesis & Critique (multi-perspective)
> 7. Final Consolidation
>
> **Minimum 50 sources. NO EFFORT SAVED. Take as much time as needed.**
> Plain markdown is **NOT ACCEPTABLE** for Tier 2.

---

### Tier 3: Comparison/Analysis

**Trigger signals:** "compare", "pros and cons", "options", "which should I", "vs", "alternatives"

| Output | Format |
|--------|--------|
| **Primary** | HTML with comparison tables, charts |
| **Secondary** | Summary in chat |

---

## üé® DEEP RESEARCH OUTPUT REQUIREMENTS (Tier 2 & 3)

When producing research documents, they MUST include:

### Content Quality (Gemini Deep Research Standard):
- **Research Depth**: 50-200+ sources consulted
- **Source Quality**: Academic papers, official docs, primary sources
- **Analysis**: Pattern extraction, gap identification
- **Citations**: Every claim backed by a source
- **Comprehensiveness**: No shortcuts, no placeholders

### Visual Design:
- Professional CSS styling (dark mode preferred)
- Proper typography (system fonts or Google Fonts)
- Color-coded sections and callouts
- Responsive layout

### Interactive Elements:
- Collapsible sections for long content
- Anchor links for navigation (table of contents)
- Syntax-highlighted code blocks
- Hover effects on interactive elements

### Structure:
- Executive summary at top
- Table of contents with anchor links
- Clear section hierarchy
- Proper citations/references section
- "Generated by TechAI" footer with correct date

### Print/PDF Compatibility:
- `@media print` CSS rules
- Page break hints for PDF conversion
- Clean print layout

---

## üö® FORBIDDEN ACTIONS (NO EXCEPTIONS)

These tools are **COMPLETELY BANNED** during `/ask` mode:

| Banned Tool | Reason |
|-------------|--------|
| `write_to_file` (on project paths) | Modifies project files |
| `replace_file_content` | Modifies files |
| `multi_replace_file_content` | Modifies files |
| `run_command` (with side effects) | Could modify project state |
| `mcp_*_deploy_*` | Deployment actions |
| Any file creation in project directories | Modifies project |

> [!IMPORTANT]
> **EVEN IF THE USER SAYS "go ahead" or "yes" AFTER an /ask prompt:**
> You MUST inform them that `/ask` mode is read-only.
> Tell them: *"To execute these changes, please start a new prompt without `/ask`."*

---

## ‚úÖ ALLOWED ACTIONS (Research Only)

### Research Tools
| Tool | Purpose |
|------|---------|
| `view_file` | Read file contents |
| `view_file_outline` | Understand file structure |
| `view_code_item` | Inspect specific functions/classes |
| `grep_search` | Search codebase for patterns |
| `find_by_name` | Locate files/directories |
| `list_dir` | Explore directory structure |
| `search_web` | Research external information |
| `read_url_content` | Read documentation/articles |
| `browser_subagent` | Browse for research (read-only) |
| `generate_image` | Create diagrams/visuals for reports |

### Safe Run Commands
| Allowed | Example |
|---------|---------|
| ‚úÖ Read-only queries | `flutter --version`, `git status`, `npm list` |
| ‚úÖ Help commands | `flutter doctor`, `dart analyze` |
| ‚ùå Build/install commands | `flutter build`, `npm install` |
| ‚ùå Git modifications | `git commit`, `git push` |

---

## ‚úÖ ARTIFACT CREATION (Brain Folder ONLY)

You MAY create files **only** in the artifacts folder:

**Path:** `%USERPROFILE%\.gemini\antigravity\brain\<conversation-id>\`

| Tier | Primary Format | Secondary Format |
|------|----------------|------------------|
| Tier 1 (Quick) | In-chat text | Optional `.md` |
| Tier 2 (Research) | **`.html`** (styled) | Optional `.md` for raw content |
| Tier 3 (Comparison) | **`.html`** (styled) | Optional `.md` for raw content |

---

## üéØ Workflow Steps

### 1. Extract Date from Metadata
- **ALWAYS** read `<ADDITIONAL_METADATA>` first
- Store the current date for use throughout

### 2. Activate /ask Mode
- If prompt contains `/ask` or `@ask` ‚Üí **STRICT READ-ONLY**
- Mental check: *"I will ONLY answer with information. I will NOT touch any project."*

### 3. Classify Response Tier
- Scan for trigger words (see classification table above)
- If ANY Tier 2 trigger is present ‚Üí **TIER 2 (Deep Research)**
- When in doubt, tier UP (better to over-deliver than under-deliver)

### 4. Research & Analyze (Tier 2/3)
- Create research plan
- Conduct multi-step research (50+ sources for Tier 2)
- Identify gaps, perform targeted searches
- Cross-reference findings

### 5. Produce Output
- **Tier 1**: Respond directly in chat
- **Tier 2/3**: Create professional HTML document in brain folder
- Verify correct date throughout document

### 6. End of Response
- Your response is complete
- If user wants actions taken ‚Üí They must start a NEW prompt without `/ask`
- There is NO second step where you execute changes

---

## üõ°Ô∏è Quick Reference

```
User prompt contains /ask?
‚îú‚îÄ‚îÄ YES ‚Üí STRICT READ-ONLY MODE
‚îÇ   ‚îú‚îÄ‚îÄ Extract date from ADDITIONAL_METADATA ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Read/research tools ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Create brain folder artifacts ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Show code examples in chat ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Propose changes in text ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Modify project files ‚ùå NEVER
‚îÇ   ‚îî‚îÄ‚îÄ Execute proposals ‚ùå NEVER
‚îÇ
‚îú‚îÄ‚îÄ TIER CLASSIFICATION
‚îÇ   ‚îú‚îÄ‚îÄ Quick Answer ‚Üí In-chat text
‚îÇ   ‚îú‚îÄ‚îÄ Deep Research ‚Üí HTML document (Gemini quality)
‚îÇ   ‚îî‚îÄ‚îÄ Comparison ‚Üí HTML with tables
‚îÇ
‚îî‚îÄ‚îÄ DATE VERIFICATION
    ‚îî‚îÄ‚îÄ Always use ADDITIONAL_METADATA date
```

---

> [!IMPORTANT]
> **This workflow CANNOT be overridden.**
> `/ask` = Read-only. Full stop.
> Questions deserve answers, not actions.
> **Tier 2+ requests REQUIRE Gemini Deep Research quality.**
